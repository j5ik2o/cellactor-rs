# mod-file-lint

## 概要
- `no_mod_rs` リンターはレガシーな `mod.rs` 依存を禁止し、2018 エディション以降のモジュール構成へ移行させます。
- 1 ファイル 1 モジュールの原則を徹底し、階層構造やテスト配置ルール（`tests.rs` 切り出し）と整合するよう設計されています。

## チェック内容
- `target/` 以下を除くファイルで `mod.rs` という名前を検出すると警告またはエラーを出力します。
- 同じファイルに対して重複報告を行わないようキャッシュしており、1 ファイルにつき 1 回のみメッセージが表示されます。

## 違反例
```
src/
└─ foo/
   └─ mod.rs   ← 違反
```

## 修正ガイド
1. `foo/mod.rs` を `foo.rs` へリネームする（`git mv foo/mod.rs foo.rs`）。
2. 既存で `foo` のサブモジュールがある場合は `foo/` ディレクトリを残し、`foo.rs` 内で `mod sub;` を宣言し直す。
3. 親モジュールの `mod foo;` 宣言はそのまま利用し、必要なら `pub use` を追加して公開範囲を調整する。
4. リネーム後に `cargo check` を実行し、参照切れがないか確認する。

## 例外指定
- 一時的に黙認したい場合は `#![allow(no_mod_rs)]` もしくは `#![allow(mod_file::no_mod_rs)]` を対象クレートに付与する。
- ピンポイントで抑止するなら違反ファイルの先頭に `#![allow(no_mod_rs)]` を置く。恒久的な運用は推奨されない。
